# 4.2.7. Interactions of styling and scripting

- スタイルシートは、`<link>`要素、`<style>`要素、`<?xml-stylesheet?>` PI、HTTPリンクヘッダー、またはその他のメカニズムによって追加されたものであっても、最初は設定されていないstyle sheet readyフラグを持っています。

- スタイルシートを適用する準備ができたら、style sheet readyフラグをセットする必要があります。
- スタイルシートが他のリソースを参照していない場合（例えば、@importルールを持たない`<style>`要素によって与えられた内部スタイルシートなど）、スタイルルールをすぐにスクリプトで利用できるようにする必要があります。
- それ以外の場合は、イベントループが'update the rendering'に達すると、スクリプトでスタイルルールを使用できるようにする必要があります。

- HTMLパーサまたはXMLパーサーのドキュメントの文脈におけるスタイルシートは、そのドキュメントのパーサによって要素が作成され、要素がパーサによって作成されたときに`<style>`要素または外部リソースリンクの`<link>`要素のいずれかであり、要素がパーザによって作成されたときに要素のスタイルシートが使用可能になっていた場合、要素のstyle sheet readyフラグがまだ設定されていない場合、イベントループがステップ1に最後に到達したとき、要素はそのドキュメントにあり、uaはその特定のスタイルシートを放棄していない場合、'a style sheet that is blocking scripts'と呼ばれる。
- uaは、いつでもスタイルシートを放棄することができる。

***
### note

- スタイルシートがロードされる前に、もしスタイルシートがまだロードされていて、放棄することは、スクリプトが誤った情報で動作する可能性があることを意味します。
- 例えば、スタイルシートが要素の色を緑色に設定したが、シートがロードされる前に結果のスタイルを検査するスクリプトが実行された場合、スクリプトは要素が黒だと(または何か他の色)を検出するでしょう。
    - したがって、残念な選択（例えば、緑の代わりにページ上の他の場所の色として黒を使用することを決定する）を行う可能性がある。
- 実装者は、遅いネットワークリクエストが完了するのを待つ間に何もしないことによるパフォーマンスの影響と、間違った情報を使用するスクリプトの可能性のバランスをとる必要があります。
***

- ドキュメントには、そのドキュメントのコンテキストで'style sheet that is blocking script'がある場合、またはそのドキュメントが親の閲覧コンテキストを持つ閲覧コンテキストにあり、その親ブラウズコンテキスト自体のアクティブドキュメントには、'style sheet that is blocking script'がある場合、'style sheet that is blocking script'を持ちます。
- ドキュメントには、前の段落で定義した'style sheet that is blocking script'がない場合、'style sheet that is blocking script'を持ちません。
