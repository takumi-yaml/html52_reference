# 4.1. Processing the media attribute

- リンクがハイパーリンクである場合、メディア属性は純粋に勧告であり、問題のdocumentがどのメディアに対して設計されたかを記述する。

- しかし、リンクが外部リソースリンクである場合、メディア属性は規範的である。
- uaは、メディア属性の値が環境に合致し、他の関連条件が適用されるときに外部リソースを適用しなければならず、そうでなければそれを適用してはならない。

- デフォルトでは、メディア属性が省略されている場合、すべてのメディアに適用されます。

***
### note
- 外部リソースには、その適用範囲を制限する制限がさらに定義されている場合があります。
- たとえば、CSSスタイルシートには@mediaブロックがいくつかあります。
    - この仕様は、そのようなさらなる制限または要件を上書きしません。
***


# 4.2 Processing the type attribute

- type属性が存在する場合、uaはリソースが与えられた型であると仮定しなければならない
    - それが空の文字列などの有効なMIMEタイプではない場合でも
- 属性が省略されているが、外部リソース・リンク・タイプにデフォルト・タイプが定義されている場合は、uaはリソースがそのタイプであると仮定しなければなりません。
- uaが指定されたリンク関係のMIMEタイプをサポートしていない場合、uaはリソースを取得すべきではありません。
- uaが指定されたリンク関係のMIMEタイプをサポートしている場合、uaは外部リソースリンクの特定の種類に指定された適切なタイミングでリソースを取得する必要があります。
- 属性が省略され、外部リソースのリンクタイプにデフォルトのタイプが定義されていないが、タイプが分かっていてサポートされていれば、ユーザエージェントはリソースを取得するでしょう。
- uaはそれがサポートされていることを想定してリソースを取得する必要があります。


- uaは、権威あるタイプ属性を考慮してはならない
    - リソースを取得する際に、uaは実際の型を判別するためにtype属性を使用してはならない
- 前述の仮定されたタイプではなく、リソースを適用するかどうかを決定するために、実際のタイプ（次の段落で定義される）のみが使用されます。


- 外部リソースリンクタイプがリソースのContent-Typeメタデータを処理するためのルールを定義する場合、それらのルールが適用されます。
- そうではない場合、リソースがイメージであることが予想される場合、uaは、リソースのContent-Typeメタデータから決定されたタイプである`official type`を使用してイメージスニッフィングルールを適用し、結果として得られる計算されたタイプのリソースを実際のタイプのように使用します。
- さらに、これらの条件のどちらも当てはまらない場合、またはユーザーエージェントが画像スニッフィング規則を適用しないことを選択した場合、ユーザエージェントはリソースのContent-Typeメタデータを使用してリソースのタイプを判断する必要があります。
- タイプメタデータは存在しないが、外部リソースリンクタイプに定義されたデフォルトタイプがある場合、ユーザエージェントはリソースがそのタイプであると仮定する必要があります。


***
### note:
- スタイルシートリンクタイプは、リソースのContent-Typeメタデータを処理するためのルールを定義します。
***

- uaがリソースのタイプを確立したら、uaは、それがサポートされているタイプであり、他の関連条件が適用される場合にリソースを適用しなければならず、そうでなければリソースを無視しなければならない。


```html
<!-- 例5
ドキュメントに次のようなラベルのスタイルシートリンクが含まれている場合-->
<link rel="stylesheet" href="A" type="text/plain">
<link rel="stylesheet" href="B" type="text/css">
<link rel="stylesheet" href="C">
<!--
... CSSスタイルシートだけをサポートする準拠のユーザエージェントは、
BファイルとCファイルをフェッチし、
Aファイルをスキップします
（text / plainはCSSスタイルシートのMIMEタイプではないため）。
ファイルBとファイルCについては、
サーバーによって返された実際のタイプをチェックします。
 text/cssとして送信されるものの場合はスタイルが適用されますが、
 text/plainまたはその他のタイプのラベルの場合は適用されません。
 2つのファイルの1つがContent-Typeメタデータなしで返された場合、
 またはContent-Type： "null"のような構文的に間違った型の場合
 スタイルシート・リンクのデフォルト・タイプが起動します。
 そのデフォルト・タイプはtext / cssなので、
 スタイルシートはそれにかかわらず適用されます。
```
