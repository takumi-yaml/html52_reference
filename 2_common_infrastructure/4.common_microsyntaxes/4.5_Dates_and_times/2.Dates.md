# 2.4.5.2. Dates

- 日付は、特定の年、月、日からなるタイムゾーン情報のない先発グレゴリオ暦の日付で構成されます。
    - [GREGORIAN](https://www.w3.org/TR/html/references.html#biblio-gregorian)

- 文字列は、指定された順序で次のコンポーネントで構成されている場合、年、月、および日を表す有効な日付文字列です。

1. 年と月を表す有効な月文字列
2. U+002D HYPHEN-MINUS 文字(-)
3. 1 ≤ day ≤ maxday の日付を表す2桁の数字 maxdayは月の日数

```
例:19
例えば、2016年2月29日は2016-02-29にコードされ、
33ADの3月3日（先発グレゴリオ暦の日付として）は0033-03-03にコードされています。
325-03-03は、325年の3月3日を意味するものではなく、
年を表す4桁の数字がないため、エラーです。
```

- 日付文字列を解析するルールは次のとおりです。
- これは、日付を返すか、何も返しません。
- アルゴリズムが`fail`の場合は、その時点で中止され、何も返されないことを意味します。

1. inputを解析対象の文字列とします。
2. positionをinputへのポインタとし、最初は文字列の先頭を指します。
3. 年、月、日を取得するために日付コンポーネントを解析します。これが何も返さない場合はfailです。
4. positionがinputの終わりを超えていない場合、failです
5. dateは、解析した年月日のdateです。
6. dateを返します

***

- 入力文字列と位置を指定して、日付コンポーネントを解析するルールは次のとおりです。
- これは、年、月、日のいずれか、または何も返しません。
- アルゴリズムが`fail`の場合は、その時点で中止され、何も返されないことを意味します。

1. 月と月を取得するために月コンポーネントを解析します。これが何も返さない場合、failです
2. maxdayを年月の日数とする。
3. positionが入力の終わりを超えている場合、またはpositionの文字がU+002D HYPHEN-MINUS文字でない場合は、failです
    - そうでない場合、位置を1文字先に移動します
4. ASCII数字である一連の文字を収集します。収集されたシーケンスが正確に2文字でない場合は、failです。
    - それ以外の場合は、結果のシーケンスを10進数の整数として解釈します。
    - その数字を日付にします。
5. 日付が1 ≤ day ≤ maxdayではない場合failです
6. 年月日を返します。

