# 2.4.5.8. Weeks

-  1週間は、年次週番号と、月曜日から始まる7日間の期間を表す週番号で構成されます。
    - このカレンダーシステムの年次週は、以下に定義するように、52または53の7日間の期間を有する。
    - グレゴリオ暦の日付である1969年12月29日（1969-12-29）から始まる7日間の期間は、1970年の週の週番号1として定義されます。連続する週は逐次番号が付けられます。
    - 年次週番号1の1週間前の週は前年の最後の週であり、その逆もあります

- 年次週は、先発グレゴリオ暦の年の最初の日（1月1日）が木曜日、または水曜、年が400で割り切れるか、4で割り切れて100で割り切れない場合、53週ある。それ以外の場合、52週
- 53週ある年次週の最終週の週番号は53です。52週ある年次週の最終週の週番号は52です。

- note
    - 特定の日の年次週番号は、その日を含む先発グレゴリオ暦の年の数字とは異なる場合があります。
    - 年次週yの最初の週は、1週間の1週目の最初の週は、グレゴリオ暦年の最初の木曜日を含む週です。

- note
    - 近代的な目的のために、ここで定義される1週間は、ISO 8601で定義されているISO週に相当します。
        - [ISO8601](https://www.w3.org/TR/html/references.html#biblio-iso8601)


- 文字列は、指定された順序で次のコンポーネントで構成されている場合は、年次週、 週を表す有効な週文字列です。
    1. 年を表す4つ以上の0超過のASCII数字
    2. U+002D HYPHEN-MINUS文字（ - ）
    3. U+0057 LATIN大文字W文字（W）
    4. 週を表す2桁のASCII数字
        - 1≤週≤maxweekの範囲で、max weekは週の年の最終日の週番号です

- 週の文字列を解析する規則は次のとおりです。
    - これは、年次週番号と週番号のいずれかを返すか、何も返しません。
    - アルゴリズムがfailの場合は、その時点で中止され、何も返されないことを意味します。

1. inputを解析対象の文字列とします。
2. positionをinputへのポインタとし、最初は文字列の先頭を指します。
3. ASCII数字である一連の文字を収集します。
    - 収集されたシーケンスが少なくとも4文字でない場合、failです
    - それ以外の場合は、結果のシーケンスを10進数の整数として解釈します。
    - その数字を年とする。
4. yearが0より大きい数値でない場合、failです
5. positionがinputの終わりを超えている場合、またはpositionの文字がU+002D HYPHEN-MINUS文字でない場合はfailです。
    - それ以外の場合は、位置を1文字前に移動します。
6. positionがinputの終わりを超えているか、または位置の文字がU+0057 LATIN大文字のW文字（W）でない場合は、failです
    - それ以外の場合は、位置を1文字前に移動します。
7. ASCII数字である一連の文字を収集します。
    - 収集されたシーケンスが正確に2文字でない場合、failです
    - それ以外の場合は、結果のシーケンスを10進数の整数として解釈します。
    - その数を週とします
8. maxweekを年の最終日の週番号とする。
9. weekが1≤週≤maxweekの範囲にない場合、failです
10. positionが入力の終わりを超えていない場合、failです
11. 年次週番号と週番号を返します。
