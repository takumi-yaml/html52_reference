# 2.4. Common microsyntaxes

- HTMLには、日付や数字などの特定のデータ型を受け入れるさまざまな場所があります。
- このセクションでは、これらのフォーマットのコンテンツの適合基準がどのようなもので、どのように解析するかについて説明します。

- NOTE
    - 実装者は、以下に説明する構文解析を実装するために使用すると考えられるサードパーティのライブラリを注意深く調べることが強く求められる。
    - 例えば、日付ライブラリは、この仕様で要求されているものとは異なるエラー処理動作を実装する可能性が高く、エラー処理の振る舞いは、この仕様で使用されている日付構文と類似した日付構文を記述した仕様では定義されていないことが多いため、エラーの処理方法が大幅に異なる傾向があります。


## 2.4.1. Common parser idioms

- スペース文字は、本明細書の目的上、U+0020 SPACE、U+0009キャラクタテーブル（タブ）、U+000Aラインフィード（LF）、U+000Cフォームフィード（FF）、およびU+000Dキャリヤリターン（CR）。
- White_Space文字は、Unicode PropList.txtデータファイルのUnicodeプロパティ "White_Space"を持つ文字です。
    - [unicode]https://www.w3.org/TR/html/references.html#biblio-unicode

- note
    - これは、Unicode.txtデータファイルの "Bidi_Class"プロパティの "White_Space"値（略称 "WS"）と混同しないでください。

- 制御文字は、Unicode "General_Category"プロパティのUnicode UnicodeData.txtデータファイルの値が "Cc"のものです。
- 大文字のASCII文字は、U+0041ラテン文字大文字A〜U+005Aラテン文字大文字Zの文字です。
- 小文字のASCII文字は、U+0061 LATIN SMALL LETTER A〜U+007A LATIN SMALL LETTER Zの範囲の文字です。
- ASCII文字は、大文字のASCII文字または小文字のASCII文字のいずれかの文字です。
- ASCII digitsは、U + 0030 DIGIT ZERO（0）からU + 0039 DIGIT NINE（9）の範囲の文字です。
- 英数字ASCII文字は、大文字のASCII文字、小文字のASCII文字、またはASCII数字の文字です。
- ASCII 16進数は、範囲U+0030 DIGIT ZERO（0）〜U+0039 DIGIT NINE（9）、U+0041ラテン大文字A〜U+0046ラテン大文字F、U+0061ラテン小文字 A〜U+0066ラテン小文字Fの文字です
- 大文字のASCII 16進数は、範囲U+0030 DIGIT ZERO（0）〜U+0039 DIGIT NINE（9）およびU+0041ラテン文字大文字A〜U+0046ラテン文字大文字Fのみの文字です。

- 以下で説明されるマイクロパーサーのいくつかは、パースされている文字列を保持し、インプット内のパースする次の文字を指す位置変数を保持するインプット変数を有するパターンに従う
- このパターンに基づくパーサーの場合、ユーザーエージェントが一連の文字を収集することを要求するステップは、以下のアルゴリズムを実行しなければならないことを意味します。文字は、収集できる文字セットです。

- 1. inputとpositionを、これらのステップを呼び出したアルゴリズムの同じ名前のものと同じ変数にします。
- 2. result を空文字列にします。
- 3. positionはinputの終わりを指していませんが、positionの文字は文字の1つですが、resultの末尾にその文字を追加し、入力の次の文字に位置を進めます。
- 4. resultを返します

- skip white space ステップは、ユーザーエージェントがスペース文字である一連の文字を収集しなければならないことを意味します。収集された文字は使用されません。
- ユーザエージェントが文字列から改行を取り除く場合、ユーザエージェントはその文字列からU+000A LINE FEED（LF）とU 000D CARRIAGE RETURN（CR）文字を削除しなければならない。
- ユーザーエージェントが文字列から先頭と末尾の空白を取り除く場合、ユーザーエージェントは文字列の先頭または末尾にあるすべての空白文字を削除する必要があります。
- ユーザーエージェントが文字列内の空白を取り除いたり、重複させたりする場合、その文字列内の1つ以上の連続する空白文字のシーケンスを単一のU + 0020 SPACE文字で置き換え、その文字列から先頭と末尾の空白を取り除く必要があります。

- ユーザーエージェントは、文字列を特定の区切り文字で厳密に分割する必要がある場合、次のアルゴリズムを使用する必要があります。
    - 1. inputを解析対象の文字列とします。
    - 2. positionを入力へのポインタとし、最初は文字列の先頭を指します。
    - 3. トークンは、最初は空のトークンの順序付きリストにします。
    - 4. positionがinputの最後を過ぎていません
        - 1. 区切り文字ではない一連の文字を収集します。
        - 2. 前の手順で収集した文字列をトークンに追加します。
        - 3. 入力の次の文字への前進位置。
    - 5. トークンを返す

- note
    - スペースとコンマで文字列を分割する特殊なケースでは、このアルゴリズムは適用されません（これらのアルゴリズムは空白のトリミングも行います）。
    -


###  2.4.2. Boolean attributes

- 多くの属性はブール値の属性です。
- 要素のブール値属性の存在は真の値を表し、属性の不在は偽の値を表します。
- 属性が存在する場合、その値は、空の文字列か、属性の正規名に対するASCIIの大文字と小文字を区別しない一致で、先頭または末尾に空白がない値でなければなりません。

- note
    - 値が割り当てられていないブール値の属性（checkedなど）は、空の文字列が割り当てられている（つまりchecked = ""）ものと暗黙的に同等です。
- note
    - ブール値の属性には "true"と "false"の値は許されません。偽の値を表現するには、属性を省略する必要があります。


```html
<!-- 例:17
チェックボックスがオンになっていて、
無効になっているチェックボックスの例を示します
checked属性とdisabled属性はブール値の属性です。 -->
<label><input type=checkbox checked name=cheese disabled> Cheese</label>

<!-- 以下と同じように書くことができます： -->
<label><input type=checkbox checked=checked name=cheese disabled=disabled> Cheese</label>

<!-- スタイルを混在させることもできます。以下は同じです -->
<label><input type='checkbox' checked name=cheese disabled=""> Cheese</label>
```

## 2.4.3. Keywords and enumerated attributes

- 一部の属性は、有限のキーワードセットの1つをとるものとして定義されています。
- このような属性を列挙型属性`enumerated attribute`と呼びます。
- キーワードは、それぞれ特定の状態にマッピングするように定義されています
    - いくつかのキーワードは同じ状態にマップされ、その場合、キーワードのいくつかはお互いの同義語です。さらに、いくつかのキーワードは不適合であると言うことができ、歴史上の理由から仕様にのみ入っています
- さらに、2つのデフォルト状態を与えることができる。
    - 最初のものは無効な値のデフォルト値
    - 2番目の値は欠損値のデフォルト値です。

- 列挙された属性が指定されている場合、属性の値は、先頭または末尾に空白がなく、不適合とは言わない与えられたキーワードのASCII大文字と小文字を区別しない一致でなければなりません。

- 属性が指定されると、その値が指定されたキーワードの1つに対してASCIIの大文字と小文字を区別しない一致である場合、そのキーワードの状態は属性が表す状態です。
- 属性値が指定されたキーワードのいずれとも一致しないが、属性の値がデフォルト値でない場合、その属性はその状態を表します。
- そうでない場合、属性値がいずれのキーワードとも一致しないが、欠落値がデフォルト状態として存在する場合、それは属性によって表される状態である。
- それ以外の場合は、デフォルトは存在せず、無効な値は、表現された状態がないことを意味します。
- 属性が指定されていない場合、欠落値のデフォルト状態が定義されている場合、それは（欠落している）属性によって表される状態です。
    - さもなければ、属性の不在は表現された状態がないことを意味します。

- note
    - 空文字列は有効なキーワードです。


